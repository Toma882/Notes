## Memcached
Memcached 通过缓存数据库查询结果，减少数据库访问次数，以提高动态Web应用的速度、提高可扩展性。

* 协议简单
* 基于libevent的事件处理
* 内置内存存储方式
* Memcached **不互相通信** 的分布式
* 缺乏认证以及安全管制，这代表应该将 memcached 服务器放置在防火墙后
* 可以利用多核优势，单实例吞吐量极高，可以达到几十万QPS
* 只支持简单的`key/value`数据结构，不像Redis可以支持丰富的数据类型
* 无法进行持久化，数据不能备份，只能用于缓存使用，且重启后数据全部丢失
* 无法进行数据同步，不能将MC中的数据迁移到其他MC实例中

## Redis
`Redis`是一个`key-value`存储系统。

* C/C++
* 类Telnet
* 依赖内存，TPS非常高
* 数据丰富，较少的IO
* Redis2.0后增加虚拟内存特性，突破物理内存限制；数据可以设置时效性，类似于memcache
* 依赖客户端来实现分布式读写；主从复制时，每次从节点重新连接主节点都要依赖整个快照,无增量复制；不支持自动sharding,需要依赖程序设定一致hash机制
* 依赖快照进行持久化；AOF增强可靠性；增强可靠性的同时，影响访问性能
* 支持事物，比较弱，仅能保证事物中的操作按顺序执行
* 数据分析不支持
* 较小数据量的性能及运算
* `Memcached`和`Redis`都是`Key-Value`类型，不适合在不同数据集之间建立关系，也不适合进行查询搜索。比如`redis`的`keys pattern`这种匹配操作，对`redis`的性能是灾难；
* Redis只能使用单线程，性能受限于CPU性能
* 支持简单的事务需求，但业界使用场景很少，并不成熟，既是优点也是缺点；

支持存储的`value`类型相对更多，包括：

* `string`
* `list`
* `set`
* `zset`
* `hash`

与`Memcached`一样，为了保证效率，数据都是缓存在内存中。区别的是`Redis`会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了`master-slave`(主从)同步。

`Redis` 是一个高性能的`key-value`数据库。 redis的出现，很大程度补偿了`Memcached`这类`key/value`存储的不足，在部 分场合可以对关系数据库起到很好的补充作用。`Redis`支持主从同步。数据可以从主服务器向任意数量的从服务器上同步，从服务器可以是关联其他从服务器的主服务器。这使得`Redis`可执行单层树复制。存盘可以有意无意的对数据进行写操作。由于完全实现了发布/订阅机制，使得从数据库在任何地方同步树时，可订阅一个频道并接收主服务器完整的消息发布记录。同步对读取操作的可扩展性和数据冗余很有帮助。

## NoSQL
> Not Only SQL

非关系型数据库 NoSQL，属于文档型数据库。先解释一下文档的数据库，即可以存放 `xml、json、bson` 类型系那个的数据。这些数据具备自述性 `self-describing`，呈现分层的树状数据结构。数据结构由键值 `key=>value` 对组成。

## MongoDB

### 特点

* C++
* BSON、自定义二进制
* 依赖内存，TPS较高
* 丰富的数据表达、索引；最类似于关系数据库，支持丰富的查询语言
* 适合大数据量存储，依赖系统虚拟内存管理，采用镜像文件存储；内存占有率比较高，官方建议独立部署在64位系统（32位有最大2.5G文件限制，64位没有改限制）
* 支持`master-slave`,`replicaset`（内部采用`paxos`选举算法，自动故障恢复）,`auto sharding`机制，对客户端屏蔽了故障转移和切分机制
* 从1.8版本后，采用`binlog`方式（MySQL同样采用该方式）支持持久化，增加可靠性
* **不支持**事物`transaction`，靠客户端自身保证
* 内置数据分析功能`mapreduce`
* 海量数据的访问效率提升
* 性能优越:快速！在适量级的内存的 MongoDB 的性能是非常迅速的，它将热数据存储在物理内存中，使得热数据的读写变得十分快，
* 高扩展:第三方支持丰富(这是与其他的 No SQL 相比，MongoDB 也具有的优势)
* 自身的 Failover 机制！
* 弱一致性（最终一致），更能保证用户的访问速度
* 文档结构的存储方式，能够更便捷的获取数据: json 的存储格式
* 支持大容量的存储,内置 GridFS
* 内置 Sharding

### 缺点
* MongoDB 不支持事务操作(最主要的缺点)
* MongoDB 占用空间过大
* MongoDB 没有如 MySQL 那样成熟的维护工具，这对于开发和IT运营都是个值得注意的地方

相比较 MySQL，MongoDB 以一种直观文档的方式来完成数据的存储。它很像 JavaScript 中定义的 JSON 格式，不过数据在存储的时候 MongoDB 数据库为文档增加了序列化的操作，最终存进磁盘的其实是一种叫做 BSON 的格式，即 Binary-JSON。


### MongoDB 应用场景
业务需求或者是项目初始阶段，而导致数据的具体格式无法明确定义的话，MongoDB的这一鲜明特性就脱颖而出了。相比传统的关系型数据库，它非常容易被扩展，这也为写代码带来了极大的方便。

MongoDB 对数据之间事务关系支持比较弱，如果业务这一方面要求比较高的话，MongoDB 还是并不适合此类型的应用。

### MongoDB 存储方式
> 虚拟内存 + 持久化

MongoDB 的所有数据实际上是存放在硬盘的，所有要操作的数据通过 `mmap` 的方式映射到内存某个区域内。MongoDB 就在这块区域里面进行数据修改，避免了零碎的硬盘操作。至`mmap`上的内容`flush`到硬盘是操作系统的事情，所以，如果，MongoDB 在内存中修改了数据后，`mmap` 数据`flush`到硬盘之前，系统宕机了，数据就会丢失。


## 区别

### 应用场景
* Redis  
  适用于对读写效率要求都很高，数据处理业务复杂和对安全性要求较高的系统（如新浪微博的计数和微博发布部分系统，对数据安全性、读写要求都很高）。
* MongoDB  
  主要解决海量数据的访问效率问题。
* Memcached  
  动态系统中减轻数据库负载，提升性能；做缓存，适合多读少写，大数据量的情况（如人人网大量查询用户信息、好友信息、文章信息等）；用于在动态系统中减少数据库负载，提升性能;做缓存，提高性能（适合读多写少，对于数据量比较大，可以采用sharding）。
